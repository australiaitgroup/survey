# Nginx 配置：支持主前端和 Super Admin 的 S3 反向代理
# 添加到 uat-sigma.jiangren.com.au 的 server 块中

# 重要：location 顺序很关键！API 必须在根路径之前

# 1. API 路由 - 最高优先级，代理到后端 EC2
location /api/ {
    include /etc/nginx/proxy_params;
    proxy_pass http://localhost:5050/api/;
    proxy_read_timeout 90s;
}

# 2. Super Admin 路由 - 代理到 S3 子路径
location /super-admin/ {
    include /etc/nginx/proxy_params;
    proxy_pass http://uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com/super-admin/;
    proxy_read_timeout 90s;
}

# 3. 主前端路由 - 代理到 S3 根路径（最低优先级）
location / {
    include /etc/nginx/proxy_params;
    proxy_pass http://uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com/;
    proxy_read_timeout 90s;
}
