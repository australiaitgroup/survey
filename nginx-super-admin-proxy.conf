# Nginx configuration for Super Admin S3 reverse proxy
# Add this location block to your existing sigma.jiangren.com.au server configuration

location /super-admin/ {
    # Proxy to UAT S3 static website (where Super Admin is deployed)
    proxy_pass http://uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com/super-admin/;

    # Headers for proper proxy behavior
    proxy_set_header Host uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com;
    proxy_set_header X-Real-IP $remote_addr;
    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
    proxy_set_header X-Forwarded-Proto $scheme;

    # Handle redirects properly
    proxy_redirect off;

    # Cache static assets
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        proxy_pass http://uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com;
        proxy_set_header Host uat-sigma.jiangren.com.au.s3-website-ap-southeast-2.amazonaws.com;
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
}
